import React, { useState } from 'react';
import { motion } from 'framer-motion';
import { FaSearch, FaFilter, FaClock } from 'react-icons/fa';
import SessionCard from './SessionCard';
import Button from '../common/Button';

const SessionList = ({ sessions = [] }) => {
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedDifficulty, setSelectedDifficulty] = useState('');
  const [selectedCategory, setSelectedCategory] = useState('');
  const [currentPage, setCurrentPage] = useState(1);
  const itemsPerPage = 12;

  // Mock data if no sessions provided
  const mockSessions = [\n    {\n      _id: '1',\n      title: 'React Hooks Deep Dive',\n      description: 'Learn advanced React Hooks patterns and optimization techniques',\n      category: 'React',\n      difficulty: 'Advanced',\n      startTime: new Date(Date.now() + 2 * 60 * 60 * 1000).toISOString(),\n      instructor: { _id: '1', name: 'Sarah Chen', avatar: '', expertise: 'React Expert' },\n      location: 'Online',\n      maxParticipants: 50,\n      registeredCount: 34,\n    },\n    {\n      _id: '2',\n      title: 'JavaScript Fundamentals for Beginners',\n      description: 'Get started with JavaScript from zero to hero',\n      category: 'JavaScript',\n      difficulty: 'Beginner',\n      startTime: new Date(Date.now() + 4 * 60 * 60 * 1000).toISOString(),\n      instructor: { _id: '2', name: 'Mike Johnson', avatar: '', expertise: 'JS Developer' },\n      location: 'Online',\n      maxParticipants: 100,\n      registeredCount: 67,\n    },\n    {\n      _id: '3',\n      title: 'Node.js REST APIs',\n      description: 'Build scalable REST APIs with Node.js and Express',\n      category: 'Node.js',\n      difficulty: 'Intermediate',\n      startTime: new Date(Date.now() + 6 * 60 * 60 * 1000).toISOString(),\n      instructor: { _id: '3', name: 'Alex Kumar', avatar: '', expertise: 'Backend Dev' },\n      location: 'Online',\n      maxParticipants: 75,\n      registeredCount: 45,\n    },\n  ];\n\n  const allSessions = sessions.length > 0 ? sessions : mockSessions;\n\n  const filteredSessions = allSessions.filter((session) => {\n    const matchesSearch =\n      session.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      session.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      session.category.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesDifficulty = !selectedDifficulty || session.difficulty === selectedDifficulty;\n    const matchesCategory = !selectedCategory || session.category === selectedCategory;\n    return matchesSearch && matchesDifficulty && matchesCategory;\n  });\n\n  const totalPages = Math.ceil(filteredSessions.length / itemsPerPage);\n  const startIdx = (currentPage - 1) * itemsPerPage;\n  const paginatedSessions = filteredSessions.slice(startIdx, startIdx + itemsPerPage);\n\n  const categories = ['React', 'JavaScript', 'Node.js', 'Python', 'Web Design'];\n  const difficulties = ['Beginner', 'Intermediate', 'Advanced'];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-3xl font-bold text-gray-900\">Live Sessions</h1>\n        <p className=\"text-gray-600\">Join interactive learning sessions with expert instructors</p>\n      </div>\n\n      {/* Search & Filter */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <div className=\"relative md:col-span-1\">\n          <FaSearch className=\"absolute left-3 top-3 text-gray-400\" />\n          <input\n            type=\"text\"\n            placeholder=\"Search sessions...\"\n            value={searchTerm}\n            onChange={(e) => {\n              setSearchTerm(e.target.value);\n              setCurrentPage(1);\n            }}\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          />\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <FaFilter className=\"text-gray-400\" />\n          <select\n            value={selectedCategory}\n            onChange={(e) => {\n              setSelectedCategory(e.target.value);\n              setCurrentPage(1);\n            }}\n            className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          >\n            <option value=\"\">All Categories</option>\n            {categories.map((cat) => (\n              <option key={cat} value={cat}>\n                {cat}\n              </option>\n            ))}\n          </select>\n        </div>\n        <select\n          value={selectedDifficulty}\n          onChange={(e) => {\n            setSelectedDifficulty(e.target.value);\n            setCurrentPage(1);\n          }}\n          className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n        >\n          <option value=\"\">All Levels</option>\n          {difficulties.map((diff) => (\n            <option key={diff} value={diff}>\n              {diff}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      {/* Sessions Grid */}\n      {paginatedSessions.length > 0 ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {paginatedSessions.map((session, index) => (\n            <motion.div key={session._id} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: index * 0.1 }}>\n              <SessionCard session={session} />\n            </motion.div>\n          ))}\n        </div>\n      ) : (\n        <div className=\"text-center py-12\">\n          <FaClock className=\"text-5xl text-gray-300 mx-auto mb-4\" />\n          <p className=\"text-gray-600 mb-4\">No sessions found matching your criteria</p>\n          <Button variant=\"primary\">Check Back Soon</Button>\n        </div>\n      )}\n\n      {/* Pagination */}\n      {totalPages > 1 && (\n        <div className=\"flex items-center justify-center gap-2\">\n          <Button\n            variant=\"outline\"\n            onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}\n            disabled={currentPage === 1}\n          >\n            Previous\n          </Button>\n          <span className=\"text-sm text-gray-600\">\n            Page {currentPage} of {totalPages}\n          </span>\n          <Button\n            variant=\"outline\"\n            onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}\n            disabled={currentPage === totalPages}\n          >\n            Next\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SessionList;
